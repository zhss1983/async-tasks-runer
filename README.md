# Асинхронный менеджер для выполнения нескольких взаимосвязанных задач

Предо мной встала задача по выполнению нескольких задач асинхронно да ещё и таким образом, что бы результат выполнения одной передавался на выполнение другой задаче.

Я уже писал подобные скрипты, но там задача была только одна, к ней лишь генерировалось множество входных данных. А тут пришлось создавать взаимосвязанные задачи. При том что одновременно может быть запущено не более определённого количества задач и по мере завершения одних должны подгружаться другие. Вот и пришлось немного посидеть и написать данный концепт.
**support.py** - файл с базовыми методами и базовым классом для выполнения задачи.
**example.py** - примитивный пример демонстрирующий принципиальные возможности асинхронного менеджера.
**GPS_parser_OpenStreetMap.py** - серьёзный и полнофункциональный пример того как можно загрузить GPS треки принадлежащие конкретной стране (в моём случае России конечно).
**upload_gpx.py** - дальнейшая обработка треков и их заливка на сервер - пример частично функционален. Удалены данные авторизации и аутентификации.
**russia.duration.json** - гео-json границ.

Для минимальной успешной работы требуется всего лишь определить класс унаследованный от **BaseTask** (**support.py**) и прописать в нём генератор данных на вход своей задачи и саму асинхронную задачу:
```python
class Task(BaseTask):
	async def task(self, data):
		...

	def data_generator(self):
		...
```
Далее формируете список заданий:
```python
tasks = [Task()]
```
И запускаете его на выполнение:
```python
atr = AsyncTaskRuner(
	chunk_size=20  # int: Количество одновременно зупущенных задач.
	time_to_save=300  # int: Время периодического сохранения промежуточных результатов.
)
atr.run(tasks)
```

Если заинтересовало - смотрите примеры, запускайте и по аналогии пишите свои. Удачи.
